<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Sorteo Empresarial Mejorado</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #f4f4f4;
    }
    nav {
      background-color: #2c3e50;
      color: white;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
    }
    nav a {
      color: white;
      text-decoration: none;
      margin: 0 10px;
      cursor: pointer;
    }
    .section {
      display: none;
      padding: 20px;
    }
    .active {
      display: block;
    }
    .participants-container {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
    }
    .card {
      background: white;
      padding: 10px;
      border-radius: 8px;
      width: 220px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      text-align: center;
    }
    .card img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      border-radius: 5px;
    }
    .card p {
      margin: 5px 0;
      font-size: 14px;
      word-wrap: break-word;
    }
    #ruleta {
      border: 6px solid #2c3e50;
      border-radius: 50%;
      margin: 20px auto;
      display: block;
      background: #fff;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
    }
    .controls {
      text-align: center;
      margin: 10px 0;
    }
    .controls button {
      padding: 12px 24px;
      margin: 5px;
      font-size: 18px;
      cursor: pointer;
      border-radius: 6px;
      border: none;
      background-color: #2980b9;
      color: white;
      transition: background-color 0.3s ease;
    }
    .controls button:hover {
      background-color: #3498db;
    }
    .winners {
      text-align: center;
      margin-top: 20px;
      font-size: 18px;
    }
    .winner {
      margin: 8px 0;
      font-weight: bold;
    }
    /* Puntero fijo */
    #puntero {
      position: relative;
      width: 0;
      height: 0;
      margin: -50px auto 0 auto;
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-bottom: 30px solid #c0392b;
      filter: drop-shadow(0 2px 2px rgba(0,0,0,0.3));
    }
  </style>
</head>
<body>

<nav>
  <div><strong>Sorteo Empresarial</strong></div>
  <div>
    <a onclick="mostrarSeccion('participantes')">Participantes</a>
    <a onclick="mostrarSeccion('sorteo')">Sorteo</a>
  </div>
</nav>

<div id="participantes" class="section active">
  <h2>Lista de Participantes</h2>
  <div class="participants-container" id="listaParticipantes"></div>
</div>

<div id="sorteo" class="section">
  <h2>Ruleta del Sorteo</h2>
  <canvas id="ruleta" width="600" height="600"></canvas>
  <div id="puntero"></div>
  <div class="controls">
    <button onclick="actualizarRuleta()">Actualizar Ruleta</button>
    <button onclick="girarRuleta()">Girar Ruleta</button>
  </div>
  <div class="winners" id="ganadoresLista"></div>
</div>

<script>

  const participantes = [
    { nombre: "Angie Kiara Flores Vargas", dni: "75628116", nacimiento: "8/04/2000", telefono: "+51 996018475", celular: "+51 996018475", imagen: "imagen/Angie Kiara Flores Vargas.jpeg" },
    { nombre: "Angel Armando Cordero Suárez", dni: "40019748", nacimiento: "12/10/1978", telefono: "+51 989990147", celular: "+51 989990147", imagen: "imagen/Angel Armando Cordero Suárez.jpeg" },
    { nombre: "Ana Cecilia Castellares Garcia", dni: "08884457", nacimiento: "4/03/1973", telefono: "+51 993320938", celular: "+51 993320938", imagen: "imagen/Ana Cecilia Castellares Garcia.jpeg" },
    { nombre: "Jophret Andres Callirgos Lopez", dni: "71710384", nacimiento: "2/12/1995", telefono: "+51 960687304", celular: "+51 997274966", imagen: "imagen/Jophret Andres Callirgos Lopez.jpeg" },
    { nombre: "Aurelio Brazzan Gonzales", dni: "08742297", nacimiento: "25/09/1951", telefono: "+51 966540226", celular: "+51 966540226", imagen: "imagen/Aurelio Brazzan Gonzales.png" },
    { nombre: "Luis Angel Cervantes Rengifo", dni: "60929799", nacimiento: "1/01/2002", telefono: "+51 912380358", celular: "+51 912380358", imagen: "imagen/Luis Angel cervantes rengifo.jpeg" },
    { nombre: "Carolina Andrea Mostajo Sáenz", dni: "72209130", nacimiento: "7/03/1994", telefono: "+51 987080065", celular: "+51 987080065", imagen: "imagen/Carolina Andrea Mostajo Sáenz.jpeg" },
    { nombre: "Carmen Rosa Baez Pomahuacre", dni: "70105226", nacimiento: "15/12/1991", telefono: "+51 944273215", celular: "+51 944273215", imagen: "imagen/Carmen Rosa Baez Pomahuacre.jpeg" },
    { nombre: "Karina Patricia Casanova Tagle", dni: "10194417", nacimiento: "1/10/1974", telefono: "+51 940605522", celular: "+51 940605522", imagen: "imagen/Karina Patricia Casanova Tagle.jpeg" },
    { nombre: "Roxana Quispe Ttupa", dni: "45027294", nacimiento: "13/10/1987", telefono: "+51 906057822", celular: "+51 906057822", imagen: "imagen/Roxana Quispe Ttupa.jpeg" },
    { nombre: "Scoly Castañeda Narváez", dni: "75270165", nacimiento: "17/05/2003", telefono: "+51 917764899", celular: "+51 945946731", imagen: "imagen/Scoly Castañeda Narváez.jpeg" },
    { nombre: "Diego Valverde Carbajal", dni: "60001840", nacimiento: "5/04/1992", telefono: "+51 994489723", celular: "+51 994489723", imagen: "imagen/Diego Valverde Carbajal.jpeg" },
    { nombre: "Rosa Hermenegilda Pozo Guadamur", dni: "40930395", nacimiento: "3/06/1981", telefono: "+51 967948840", celular: "+51 986940885", imagen: "imagen/Rosa Hermenegilda Pozo Guadamur.jpeg" },
    { nombre: "Marco Antonio Prieto Urbina", dni: "49077909", nacimiento: "1/03/1983", telefono: "+51 982945395", celular: "+51 982845395", imagen: "imagen/Marco Antonio prieto Urbina.jpeg" },
    { nombre: "Graciela Garcia Elguera", dni: "06662024", nacimiento: "19/11/1968", telefono: "+51 957636996", celular: "+51 957636996", imagen: "imagen/Graciela Garcia Elguera.jpeg" },
    { nombre: "Víctor Ahane Ahane", dni: "06123218", nacimiento: "12/11/1949", telefono: "+51 992776666", celular: "+51 984444311", imagen: "imagen/Víctor Ahane Ahane.png" },
    { nombre: "Silvia susana Cáceres Atamari", dni: "41448152", nacimiento: "12/08/1982", telefono: "+51 991242323", celular: "+51 991242323", imagen: "imagen/Silvia susana Cáceres atamari.jpeg" },
    { nombre: "Allan Pierre Seminario Alburquerque", dni: "41550182", nacimiento: "14/09/1982", telefono: "+51 960355459", celular: "+51 960355459", imagen: "imagen/Allan Pierre Seminario Alburquerque.jpeg" },
    { nombre: "Elina Lucila Marchena Guzman", dni: "46301368", nacimiento: "17/08/1989", telefono: "+51 978002128", celular: "+51 978002128", imagen: "imagen/Elina Lucila Marchena Guzman.jpeg" },
    { nombre: "María Alejandra Mendez Vega", dni: "44822209", nacimiento: "1/02/1988", telefono: "+51 984308663", celular: "+51 984308663", imagen: "imagen/María Alejandra Mendez Vega.jpeg" },
    { nombre: "Mardy Mariños Meléndez", dni: "43090937", nacimiento: "13/08/1985", telefono: "+51 996944517", celular: "+51 996944517", imagen: "imagen/Mardy Mariños Meléndez.jpeg" },
    { nombre: "Leslie Giuliana Bazalar Quezada", dni: "71347751", nacimiento: "13/11/1991", telefono: "+51 954117741", celular: "+51 954117741", imagen: "imagen/Leslie Giuliana Bazalar Quezada.jpeg" },
    { nombre: "Dane Bruce Cachi Eugenio", dni: "09875556", nacimiento: "29/10/1973", telefono: "+51 968886079", celular: "+51 968886079", imagen: "imagen/Dane Bruce Cachi Eugenio.jpeg" },
    { nombre: "Julio Andre de la breña Romani", dni: "45556794", nacimiento: "19/02/1989", telefono: "+51 918891701", celular: "+51 900330649", imagen: "imagen/Julio andre de la breña romani.jpeg" },
    { nombre: "Eddy Henry Gonzales Carrera", dni: "41073359", nacimiento: "18/10/1981", telefono: "+51 945462287", celular: "+51 945462287", imagen: "imagen/Eddy henry Gonzales carrera.jpeg" },
    { nombre: "Carlos Alfonso Muñoz Rubio", dni: "41241984", nacimiento: "4/03/1982", telefono: "+51 991899650", celular: "+51 991899650", imagen: "imagen/Carlos Alfonso Muñoz Rubio.jpeg" },
    { nombre: "Alejandro Felipe Alvarado Tolentino", dni: "73177839", nacimiento: "11/04/1998", telefono: "+51 940321934", celular: "+51 940321934", imagen: "imagen/Alejandro Felipe Alvarado Tolentino.jpeg" },
    { nombre: "Dante Acosta Zapata", dni: "10731954", nacimiento: "12/06/1978", telefono: "+51 943702496", celular: "+51 943702496", imagen: "imagen/Dante Acosta Zapata.jpeg" },
    { nombre: "Liz Rivera Suárez", dni: "40336025", nacimiento: "24/08/1979", telefono: "+51 990804579", celular: "+51 990804579", imagen: "imagen/Liz Rivera Suárez.jpeg" },
    { nombre: "Alvaro Rafael Dominguez Albines", dni: "72216663", nacimiento: "2/12/1979", telefono: "+51 962168953", celular: "+51 962168953", imagen: "imagen/Alvaro Rafael Dominguez Albines.jpeg" },
    { nombre: "Jose Luis Mendoza Humeres", dni: "42100051", nacimiento: "16/09/1983", telefono: "+51 955605873", celular: "+51 955605873", imagen: "imagen/Jose Luis Mendoza Humeres.jpeg" },
    { nombre: "Oswaldo Azurin Camacho", dni: "42371735", nacimiento: "26/03/1984", telefono: "+51 991512281", celular: "+51 991512281", imagen: "imagen/Oswaldo azurin camacho.jpeg" }
  ];

  const colores = ['#e67e22', '#16a085', '#2980b9', '#8e44ad', '#f39c12', '#2ecc71', '#d35400', '#1abc9c', '#c0392b', '#7f8c8d'];

  let ganadores = [];

  const contenedor = document.getElementById('listaParticipantes');
  contenedor.innerHTML = ''; // limpiar

  participantes.forEach(p => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <img src="${p.imagen}" alt="${p.nombre}" onerror="this.src='imagenes/default.jpg'">
      <p><strong>${p.nombre}</strong></p>
      <p>DNI: ${p.dni}</p>
      <p>Nac: ${p.nacimiento}</p>
      ${p.telefono ? `<p>Teléfono: ${p.telefono}</p>` : ''}
      ${p.celular ? `<p>Celular: ${p.celular}</p>` : ''}
    `;
    contenedor.appendChild(card);
  });

  function mostrarSeccion(id) {
    document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  function actualizarRuleta() {
    const canvas = document.getElementById('ruleta');
    const ctx = canvas.getContext('2d');
    const total = participantes.length;
    const anglePerSlice = (2 * Math.PI) / total;

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.lineWidth = 3;
    ctx.strokeStyle = "#2c3e50";
    ctx.font = "bold 14px Arial";
    ctx.textBaseline = "middle";

    participantes.forEach((p, i) => {
      const angle = i * anglePerSlice;

      // Dibujar segmento
      ctx.beginPath();
      ctx.moveTo(300, 300);
      ctx.fillStyle = colores[i % colores.length];
      ctx.arc(300, 300, 280, angle, angle + anglePerSlice);
      ctx.lineTo(300, 300);
      ctx.fill();
      ctx.stroke();

      // Texto
      ctx.save();
      ctx.translate(300, 300);
      ctx.rotate(angle + anglePerSlice / 2);

      const maxWidth = 180;
      let text = p.nombre;
      while(ctx.measureText(text).width > maxWidth && text.length > 0){
        text = text.slice(0, -1);
      }
      if(text.length < p.nombre.length) text = text.slice(0, -1) + "…";

      ctx.fillStyle = "#fff";
      ctx.fillRect(120, -16, maxWidth, 32);

      ctx.fillStyle = "#000";
      ctx.textAlign = "center";
      ctx.fillText(text, 120 + maxWidth/2, 0);
      ctx.restore();
    });
  }

  function girarRuleta() {
    if (participantes.length === 0) return alert("No hay participantes");
    if (ganadores.length >= 12) return alert("Ya hay 12 ganadores");

    let ganador;
    do {
      const index = Math.floor(Math.random() * participantes.length);
      ganador = participantes[index];
    } while (ganadores.includes(ganador));

    ganadores.push(ganador);
    mostrarGanadores();
  }

  function mostrarGanadores() {
    const div = document.getElementById('ganadoresLista');
    div.innerHTML = `<h3>Ganadores</h3>`;
    ganadores.forEach((g, i) => {
      div.innerHTML += `<div class="winner">${i + 1}. ${g.nombre} - Celular: ${g.celular}</div>`;
    });
  }

  actualizarRuleta();

</script>

</body>
</html>
